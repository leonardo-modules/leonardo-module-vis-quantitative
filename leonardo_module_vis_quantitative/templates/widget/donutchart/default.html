{% extends widget.get_base_template %}
{% load static from staticfiles %}

{% block content %}
<div class="donutchart" id="donutchart_{{ widget.fe_identifier }}"><svg></svg></div>
<script type="text/javascript">
  $(function(){
    loadResource({src:'{% static "vis/js/charts/donutchart.js" %}',callback: function(){
      leonardo.charts.donutchart.create({
        chartSelector:"#donutchart_{{ widget.fe_identifier }} svg",
        containerSelector:"#{{ widget.fe_identifier }}",
        url: "/data/data/",
        requestData:{widget_id:$("#donutchart_{{ widget.fe_identifier }}").closest("div.leonardo-widget").attr('id')},
        updateInterval:{{ widget.refresh_interval }} * 1000,
      });
    }});
});
</script>
{% endblock %}
